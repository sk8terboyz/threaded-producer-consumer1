This is code from a class I took a couple years ago where all code was developed on Linux servers.

This program was created to fulfill homework/classroom requirements, not professional development.

This program is meant to error out.

Old README/Explanation:

In this program, we create a buffer and share memory between producer and consumer threads. The buffer is also created in a way that is not thread-safe. At the beginning of this program, a constant integer is set to the size of ten to set the size of the buffer. Then the buffer array, counter, and input array are all initialized with their appropriate sizes and values. The input array is then filled with all values from one to one million. This is done in the main function before any threads are initialized/created. After all the values are assigned within the input array, the producer and consumer threads are initialized and created. The producer thread moves to the insert_item() function. In this function all variables are first initialized and then enters into a while loop. This while loop will run as long as there are no more values to be copied over. Another while loop is nested within the first one to set a busy wait loop to give the consumer thread a chance to run. The while loop will end whenever counter is not equal to the constant buffer size. The counter is only incremented after each value is inserted into the buffer array. Once this while loop finishes, the producer thread will exit and go back to the main function to join with the main thread. While this entire process of the producer is occurring, the consumer thread is created into the remove_item() function. In this function, all of the variables needed are first initialized as well. Another while loop is then entered to run while there are still values that need to be copied over. There is also a nested while loop within this function to set another busy waiting loop if there are no values within the buffer array. Whenever there are values within the buffer, the value that first came in is consumed. The consumed value is then stored within the variable "checker" to allow the function to check if the values are coming in incrementally. If the values do not come in incrementing by one, an error message is outputted to alert the user what value was successfully last stored and what value was stored instead of the expected value. After the error message is sent, the program exits. If there is no issues with the incremental values, then the consumer thread will exit it's function and go back to the main function. In the main function, it will do the same process as the producer thread and join back with the main thread. Although, that possibility will never come. This program is created with the buffer that is not thread-safe. That means that the threads will be accessing the same memory as each other at times. Once this happens, an error will occur and the intended purpose of the program fails. This means that the error message will always be outputted to the user with different values each time it is run.